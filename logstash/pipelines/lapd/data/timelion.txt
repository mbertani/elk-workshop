Timelion queries:

# crime_classification_percentages
$q1='crime_description:HOMICIDE',$q2='crime_description:TRAFFIC',$q3='crime_description:BATTERY NOT ASSAULT',$q4='crime_description: THEFT',$q5='crime_description: BURGLARY',$q6='crime_description: ASSAULT',$q7='crime_description: "VEHICLE - STOLEN"',$q8='crime_description: ROBBERY',$q9='NOT (crime_description: HOMICIDE TRAFFIC BATTERY THEFT BURGLARY ASSAULT "VEHICLE - STOLEN" ROBBERY)',$timefield='@timestamp',$useKibanaFilter=true,.es(q=$q1,timefield=$timefield,kibana=$useKibanaFilter).divide(.es(q='*',timefield=$timefield,kibana=$useKibanaFilter)).yaxis(min=0,max=1).color(#57c17b),.es(q=$q2,timefield=$timefield,kibana=$useKibanaFilter).divide(.es(q='*',timefield=$timefield,kibana=$useKibanaFilter)).yaxis(min=0,max=1).color(#006e8a),.es(q=$q3,timefield=$timefield,kibana=$useKibanaFilter).divide(.es(q='*',timefield=$timefield,kibana=$useKibanaFilter)).yaxis(min=0,max=1).color(#6f87d8),.es(q=$q3,timefield=$timefield,kibana=$useKibanaFilter).divide(.es(q='*',timefield=$timefield,kibana=$useKibanaFilter)).yaxis(min=0,max=1).color(#6f87d8),.es(q=$q4,timefield=$timefield,kibana=$useKibanaFilter).divide(.es(q='*',timefield=$timefield,kibana=$useKibanaFilter)).yaxis(min=0,max=1).color(#663db8),.es(q=$q5,timefield=$timefield,kibana=$useKibanaFilter).divide(.es(q='*',timefield=$timefield,kibana=$useKibanaFilter)).yaxis(min=0,max=1).color(#bc52bc),.es(q=$q6,timefield=$timefield,kibana=$useKibanaFilter).divide(.es(q='*',timefield=$timefield,kibana=$useKibanaFilter)).yaxis(min=0,max=1).color(#9e3533),.es(q=$q7,timefield=$timefield,kibana=$useKibanaFilter).divide(.es(q='*',timefield=$timefield,kibana=$useKibanaFilter)).yaxis(min=0,max=1).color(#daa05d),.es(q=$q8,timefield=$timefield,kibana=$useKibanaFilter).divide(.es(q='*',timefield=$timefield,kibana=$useKibanaFilter)).yaxis(min=0,max=1).color(#57c17b),.es(q=$q9,timefield=$timefield,kibana=$useKibanaFilter).divide(.es(q='*',timefield=$timefield,kibana=$useKibanaFilter)).yaxis(min=0,max=1).color(#006e8a)

#per type

$query='crime_description:HOMICIDE',$timefield='@timestamp',$windowSize=4,$nsigma=3,$useKibanaFilter=true,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).color(#57c17b).lines(fill=1),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).condition(gt,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).movingaverage($windowSize,'left').if(eq,null,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter)).sum(.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).mvstd($windowSize).if(eq,null,0).multiply($nsigma)),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter),0).label(outliers).bars(3).color(#E6031C)

$query='crime_description:TRAFFIC',$timefield='@timestamp',$windowSize=4,$nsigma=3,$useKibanaFilter=true,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).color(#006e8a).lines(fill=1),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).condition(gt,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).movingaverage($windowSize,'left').if(eq,null,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter)).sum(.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).mvstd($windowSize).if(eq,null,0).multiply($nsigma)),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter),0).label(outliers).bars(3).color(#E6031C)

$query='crime_description:BATTERY NOT ASSAULT',$timefield='@timestamp',$windowSize=4,$nsigma=3,$useKibanaFilter=true,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).color(#6f87d8).lines(fill=1),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).condition(gt,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).movingaverage($windowSize,'left').if(eq,null,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter)).sum(.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).mvstd($windowSize).if(eq,null,0).multiply($nsigma)),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter),0).label(outliers).bars(3).color(#E6031C)

$query='crime_description: THEFT',$timefield='@timestamp',$windowSize=4,$nsigma=3,$useKibanaFilter=true,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).color(#663db8).lines(fill=1),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).condition(gt,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).movingaverage($windowSize,'left').if(eq,null,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter)).sum(.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).mvstd($windowSize).if(eq,null,0).multiply($nsigma)),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter),0).label(outliers).bars(3).color(#E6031C)

$query='crime_description: BURGLARY',$timefield='@timestamp',$windowSize=4,$nsigma=3,$useKibanaFilter=true,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).color(#bc52bc).lines(fill=1),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).condition(gt,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).movingaverage($windowSize,'left').if(eq,null,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter)).sum(.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).mvstd($windowSize).if(eq,null,0).multiply($nsigma)),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter),0).label(outliers).bars(3).color(#E6031C)

$query='crime_description: ASSAULT',$timefield='@timestamp',$windowSize=4,$nsigma=3,$useKibanaFilter=true,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).color(#9e3533).lines(fill=1),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).condition(gt,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).movingaverage($windowSize,'left').if(eq,null,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter)).sum(.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).mvstd($windowSize).if(eq,null,0).multiply($nsigma)),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter),0).label(outliers).bars(3).color(#E6031C)

$query='crime_description: "VEHICLE - STOLEN"',$timefield='@timestamp',$windowSize=4,$nsigma=3,$useKibanaFilter=true,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).color(#daa05d).lines(fill=1),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).condition(gt,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).movingaverage($windowSize,'left').if(eq,null,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter)).sum(.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).mvstd($windowSize).if(eq,null,0).multiply($nsigma)),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter),0).label(outliers).bars(3).color(#E6031C)

$query='crime_description: ROBBERY',$timefield='@timestamp',$windowSize=4,$nsigma=3,$useKibanaFilter=true,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).color(#57c17b).lines(fill=1),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).condition(gt,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).movingaverage($windowSize,'left').if(eq,null,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter)).sum(.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).mvstd($windowSize).if(eq,null,0).multiply($nsigma)),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter),0).label(outliers).bars(3).color(#E6031C)

$query='NOT (crime_description: HOMICIDE TRAFFIC BATTERY THEFT BURGLARY ASSAULT "VEHICLE - STOLEN" ROBBERY)',$timefield='@timestamp',$windowSize=4,$nsigma=3,$useKibanaFilter=true,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).color(#006e8a).lines(fill=1),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).condition(gt,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).movingaverage($windowSize,'left').if(eq,null,.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter)).sum(.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter).mvstd($windowSize).if(eq,null,0).multiply($nsigma)),.es(q=$query,timefield=$timefield,kibana=$useKibanaFilter),0).label(outliers).bars(3).color(#E6031C)
